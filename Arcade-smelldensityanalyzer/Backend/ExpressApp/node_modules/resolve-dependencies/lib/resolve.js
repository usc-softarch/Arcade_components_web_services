"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const loader_pool_1 = require("./loader-pool");
const options_1 = require("./options");
const node_loader_1 = require("./node-loader");
exports.resolveSync = node_loader_1.resolveSync;
async function resolve(...options) {
    const opts = options_1.normalizeOptions(options), loader = new loader_pool_1.Loader(opts);
    await loader.setup();
    const res = await Promise.all(opts.entries.map((request) => loader.loadEntry(opts.cwd, request, opts.files))), warnings = [], entryMap = opts.entries.reduce((entryMap, entry, i) => {
        entryMap[entry] = res[i].entry;
        warnings.push(...res[i].warnings);
        return entryMap;
    }, {});
    loader.quit();
    return { files: opts.files, entries: entryMap, warnings };
}
exports.default = resolve;
exports.resolve = resolve;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzb2x2ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9yZXNvbHZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsK0NBQXNDO0FBRXRDLHVDQUErRDtBQUMvRCwrQ0FBMkM7QUFpQnpCLHNCQWpCVCx5QkFBVyxDQWlCUztBQWZkLEtBQUssVUFBVSxPQUFPLENBQUMsR0FBRyxPQUFnRDtJQUN2RixNQUFNLElBQUksR0FBRywwQkFBZ0IsQ0FBQyxPQUFPLENBQUMsRUFDcEMsTUFBTSxHQUFHLElBQUksb0JBQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUMzQixNQUFNLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQTtJQUVwQixNQUFNLEdBQUcsR0FBRyxNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFDM0csUUFBUSxHQUFhLEVBQUUsRUFDdkIsUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsUUFBUSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNwRCxRQUFRLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQU0sQ0FBQTtRQUMvQixRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFBO1FBQ2pDLE9BQU8sUUFBUSxDQUFBO0lBQ2pCLENBQUMsRUFBRSxFQUE2QixDQUFDLENBQUE7SUFDbkMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFBO0lBQ2IsT0FBTyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLENBQUE7QUFDM0QsQ0FBQztBQWRELDBCQWNDO0FBQ1EsMEJBQU8ifQ==